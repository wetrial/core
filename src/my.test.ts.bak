import { newGuid } from './utils';
import { encrypt, decrypt } from './crypto';
import { isEqual } from 'lodash';

const json = {
  ProjectId: '660963782415891042',
  oid: '526337254121701595',
  IsConsulteProject: '0',
  IsProject: '',
  Leader: [],
  units: [
    {
      Name: '北京赛德盛医药科技股份有限公司',
      Address: 'ffffffffffffffffffffffasd',
      Province: '110000',
      City: '110001',
      ProjectManager: '天天',
      Mobile: '12233333333',
      Email: null,
      Telephone: null,
      ProjectId: '660963782415891042',
      Type: '1',
      Id: '',
      OrderNo: 1,
      IsConfig: false,
      SupplierId: '526337162939974206',
      UserContactId: '002DFA53-5382-4E23-83DE-D5B6E0956710',
    },
    {
      IsCro: true,
      Name: '北京赛德盛医药科技股份有限公司',
      Address: 'fasdfasdf',
      Province: '110000',
      City: '110001',
      ProjectManager: '天天',
      Mobile: '12233333333',
      Email: null,
      Telephone: null,
      ProjectId: '660963782415891042',
      Type: '3',
      Id: '',
      OrderNo: 2,
      IsConfig: false,
      SupplierId: '608711213753433064',
      UserContactId: '002DFA53-5382-4E23-83DE-D5B6E0956710',
    },
    {
      IsStaticCompany: true,
      Name: '3',
      Address: 'fasdfasdfasdf',
      Province: '130000',
      City: '130200',
      ProjectManager: '测试PI',
      ProjectId: '660963782415891042',
      Type: '9',
      Id: '',
      OrderNo: 4,
      IsConfig: true,
      SupplierId: '660777808184147795',
      UserContactId: '00B217D9-7728-4356-BFE1-7F72256E5A46',
    },
    {
      IsDataManage: true,
      Name: 'fasdfasdfasdf',
      Province: '110000',
      City: '110001',
      ProjectManager: '天天',
      Mobile: '12233333333',
      Email: null,
      Telephone: null,
      ProjectId: '660963782415891042',
      Type: '8',
      Id: '',
      OrderNo: 5,
      IsConfig: true,
      SupplierId: '660955916596319705',
      UserContactId: '002DFA53-5382-4E23-83DE-D5B6E0956710',
    },
    {
      IsThirdExperiment: true,
      Name: '上海交通大学医学院附属瑞金医院国家药物临床试验机构',
      Address: 'gfasdfasdfasdf',
      Province: '140000',
      City: '140400',
      ProjectManager: '测试PI',
      ProjectId: '660963782415891042',
      Type: '11',
      Id: '',
      OrderNo: 6,
      IsConfig: true,
      SupplierId: '658668730186331420',
      UserContactId: '00B217D9-7728-4356-BFE1-7F72256E5A46',
    },
  ],
  IsCro: true,
  IsStaticCompany: true,
  IsDataManage: true,
  IsThirdExperiment: true,
};

describe('XXG Test', () => {
  describe('request 加密', () => {
    it('ajax', () => {
      const key = newGuid();
      const encryptedData = encrypt(json, key);
      const decryptedData = JSON.parse(decrypt(encryptedData, key));
      expect(isEqual(json, decryptedData)).toBe(true);
    });
  });
});
